<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VentasSys</title>
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1f2937">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%232563eb' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><circle cx='9' cy='21' r='1'/><circle cx='20' cy='21' r='1'/><path d='M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6'/></svg>">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- SheetJS (js-xlsx) para exportar a Excel -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.2/package/dist/xlsx.full.min.js"></script>
    
    <!-- jsPDF and plugins for PDF Generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Estilos CSS Personalizados -->
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-100">

    <!-- Contenedor principal de la aplicación -->
    <div id="app-root"></div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js" defer></script>

    <!-- Firebase Config -->
    <script src="js/firebase-config.js" defer></script>

    <!-- Scripts de la aplicación (orden de carga importante) -->
    <script src="js/state.js" defer></script>
    <script src="js/templates.js" defer></script>
    <script src="js/utils.js" defer></script>
    <script src="js/views/crud.js" defer></script> <!-- El CRUD genérico primero -->
    <script src="js/views/dashboard.js" defer></script>
    <script src="js/views/inventory.js" defer></script>
    <script src="js/views/sales.js" defer></script>
    <script src="js/views/reports.js" defer></script>
    <script src="js/views/expenses.js" defer></script>
    <script src="js/views/closing.js" defer></script>
    <script src="js/views/priceList.js" defer></script>
    <script src="js/views/exchangeRate.js" defer></script>
    <script src="js/views/settings.js" defer></script>
    <script src="js/views/customers.js" defer></script>
    <script src="js/views/suppliers.js" defer></script>
    <script src="js/auth.js" defer></script> <!-- auth.js después de las vistas -->
    <script src="js/app.js" defer></script> <!-- app.js al final -->

    <!-- PWA Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => console.log('ServiceWorker registration successful with scope: ', registration.scope))
                    .catch(err => console.log('ServiceWorker registration failed: ', err));
            });
        }
    </script>
</body>
</html>